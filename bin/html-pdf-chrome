#!/usr/bin/env node

var process = require('process');
var fs = require('fs');

var argv = require('minimist')(process.argv.slice(2), {
  string: ['html', 'pdf']
});

var htmlPdf = require('../node_modules/html-pdf-chrome');

if (!argv['html'] || !argv['pdf']) {
  console.log('Usage: html-pdf-chrome --html input.html --pdf output.pdf');
  process.exit(1);
}

var html = fs.readFileSync(argv['html']).toString();

var options = {
  chromeFlags: [
    '--disable-gpu',
    '--no-sandbox',
    '--headless',
    '--hide-scrollbars',
  ]
};

htmlPdf.create(html, options).then(function(pdf) {
  pdf.toFile(argv['pdf']);
});
